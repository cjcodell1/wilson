{
  "variables": {
    "tenant_id": "{{env `ARM_TENANT_ID`}}",
    "subscription_id": "{{env `ARM_SUBSCRIPTION_ID`}}",
    "client_id": "{{env `ARM_CLIENT_ID`}}",
    "client_secret": "{{env `ARM_CLIENT_SECRET`}}"
  },
  "builders": [
    {
      "type": "azure-arm",    
      "client_id": "{{user `client_id`}}",
      "client_secret": "{{user `client_secret`}}",
      "subscription_id": "{{user `subscription_id`}}",
      "tenant_id": "{{user `tenant_id`}}",
      "managed_image_resource_group_name": "MDisk_rg",
      "managed_image_name": "attacker",

      "os_type": "Linux",
      "image_publisher": "Canonical",
      "image_offer": "UbuntuServer",
      "image_sku": "16.04-LTS",

      "location": "East US",
        "vm_size": "Standard_DS2_v2"
    }
  ],
    "provisioners": [
      {
        "execute_command": "chmod +x {{ .Path }}; {{ .Vars }} sudo -E sh '{{ .Path }}'",
        "inline": [
          "apt-get update",
          "apt-get upgrade -y",
          "apt-get install -y software-properties-common",
          "add-apt-repository --yes --update ppa:ansible/ansible",
          "apt-get update",
          "apt-get upgrade -y",
          "apt-get -y install ansible",
          "apt-get -y install git",
           
          "git clone https://github.com/cjcodell1/wilson.git",
          "ansible-playbook wilson/scenarios/linux/baseline-attacker.yml",
          "mkdir /home/attacker",
          "echo '-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----' > /home/attacker/alice",
          "echo '-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----' > /home/attacker/bob",
          "echo '-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----' > /home/attacker/charlie",
          "chown -R attacker:attacker /home/attacker/",
          "chmod 400 /home/attacker/bob /home/attacker/charlie",
  
          "/usr/sbin/waagent -force -deprovision+user && export HISTSIZE=0 && sync"
        ],
        "inline_shebang": "/bin/sh -x",
        "type": "shell"
      }
    ]
  }
